<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flavorful Feeds Recipe Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: url('recipes.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #6c757d;
            color: white;
            padding: 10px 20px;
        }
        header h1 {
            margin: 0;
        }
        nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 15px;
        }
        nav a {
            color: white;
            text-decoration: none;
        }
        main {
            padding: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ccc;
        }
        th {
            background-color: #f2f2f2;
        }
        button {
            cursor: pointer;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: #6c757d;
            color: white;
            position: relative;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <h1>Flavorful Feeds Recipe Management</h1>
        <nav>
            <ul>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="users.html">User  Management</a></li>
                <li><a href="recipes.html">Recipe Management</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="recipe-management">
            <h2>Recipe Management</h2>
            <button onclick="showAddRecipeForm()">Add New Recipe</button>
            <table id="recipe-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Date Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Green Smoothie Bowl</td>
                        <td>Jochebed Tetteh</td>
                        <td>2018-07-13</td>
                        <td>
                            <button onclick="viewRecipe(1)">View</button>
                            <button onclick="editRecipe(1)">Edit</button>
                            <button onclick="deleteRecipe(1)">Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Avocado Salad</td>
                        <td>Nathily Amoako</td>
                        <td>2024-09-20</td>
                        <td>
                            <button onclick="viewRecipe(2)">View</button>
                            <button onclick="editRecipe(2)">Edit</button>
                            <button onclick="deleteRecipe(2)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="recipe-details" style="display: none;">
            <h3>Recipe Details</h3>
            <div id="recipe-info"></div>
        </section>

        <section id="recipe-form" style="display: none;">
            <h3 id="form-title">Add/Edit Recipe</h3>
            <div id="recipe-form-container">
                <form id="recipeForm" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                    <div>
                        <label for="title">Recipe Title:</label>
                        <input type="text" id="title" required>
                    </div>
                    <div>
                        <label for="author">Author:</label>
                        <input type="text" id="author" required>
                    </div>
                                        <div>
                        <label for="date">Date Created:</label>
                        <input type="date" id="date" required>
                    </div>
                    <div>
                        <label for="prepTime">Preparation Time (minutes):</label>
                        <input type="number" id="prepTime" required>
                    </div>
                    <div>
                        <label for="cookTime">Cooking Time (minutes):</label>
                        <input type="number" id="cookTime" required>
                    </div>
                    <div>
                        <label for="servingSize">Serving Size:</label>
                        <input type="number" id="servingSize" required>
                    </div>
                    <div>
                        <label for="foodDesc">Food Description:</label>
                        <textarea id="foodDesc" required></textarea>
                    </div>
                    <div>
                        <label for="caloriesPerServing">Calories per Serving:</label>
                        <input type="number" id="caloriesPerServing" required>
                    </div>
                    <div>
                        <label for="foodOrigin">Food Origin:</label>
                        <input type="text" id="foodOrigin" required>
                    </div>
                    <div>
                        <label for="instructions">Instructions:</label>
                        <textarea id="instructions" required></textarea>
                    </div>
                    <div>
                        <label for="imageURL">Recipe Image URL:</label>
                        <input type="url" id="imageURL" required>
                    </div>
                    <div id="ingredients">
                        <h4>Ingredients:</h4>
                        <table id="ingredient-table">
                            <thead>
                                <tr>
                                    <th>Ingredient Name</th>
                                    <th>Origin</th>
                                    <th>Nutritional Value</th>
                                    <th>Allergen Information</th>
                                    <th>Shelf Life</th>
                                    <th>Quantity</th>
                                    <th>Unit</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="ingredient-list">
                                <!-- Ingredient list will be rendered here -->
                            </tbody>
                        </table>
                        <button onclick="addIngredient()">Add Ingredient</button>
                    </div>
                    <div>
                        <button type="submit">Save Recipe</button>
                        <button type="button" onclick="hideAddRecipeForm()">Cancel</button>
                    </div>
                </form>
            </div>
        </section>

        <script>
            // JavaScript code for recipe management
            let recipes = [
                {
                    id: 1,
                    title: 'Green Smoothie Bowl',
                    author: 'Jochebed Tetteh',
                    date: '2018-07-13',
                    prepTime: 10,
                    cookTime: 0,
                    servingSize: 1,
                    foodDesc: 'A healthy and refreshing smoothie bowl',
                    caloriesPerServing: 200,
                    foodOrigin: 'Ghana',
                    instructions: 'Blend all ingredients and serve',
                    imageURL: 'https://example.com/smoothie-bowl.jpg',
                    ingredients: [
                        {
                            name: 'Banana',
                            origin: 'Ghana',
                            nutritionalValue: 'Rich in potassium',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '3 days',
                            quantity: 1,
                            unit: 'piece'
                        },
                        {
                            name: 'Spinach',
                            origin: 'USA',
                            nutritionalValue: 'Rich in iron',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '5 days',
                            quantity: 2,
                            unit: 'cups'
                        }
                    ]
                },
                {
                    id: 2,
                    title: 'Avocado Salad',
                    author: 'Nathily Amoako',
                    date: '2024-09-20',
                    prepTime: 15,
                    cookTime: 0,
                    servingSize: 2,
                    foodDesc: 'A healthy and refreshing salad',
                    caloriesPerServing: 300,
                    foodOrigin: 'Mexico',
                    instructions: 'Mix all ingredients and serve',
                    imageURL: 'https://example.com/avocado-salad.jpg',
                    ingredients: [
                        {
                            name: 'Avocado',
                            origin: 'Mexico',
                            nutritionalValue: 'Rich in healthy fats',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '5 days',
                            quantity: 2,
                            unit: 'pieces'
                        },
                        {
                            name: 'Tomato',
                            origin: 'USA',
                            nutritionalValue: 'Rich in vitamin C',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '7 days',
                            quantity: 3,
                            unit: 'pieces'
                        }
                    ]
                }
            ];

            function showAddRecipeForm() {
                document.getElementById('recipe-form').style.display = 'block';
            }

            function hideAddRecipeForm() {
                document.getElementById('recipe-form').style.display = 'none';
            }

            function addIngredient() {
                const ingredientTable = document.getElementById('ingredient-table');
                const newRow = ingredientTable.insertRow(-1);
                const cells = [];
                cells.push(newRow.insertCell(0));
                cells.push(newRow.insertCell(1));
                cells.push(newRow.insertCell(2));
                cells.push(newRow.insertCell(3));
                cells.push(newRow.insertCell(4));
                cells.push(newRow.insertCell(5));
                cells.push(newRow.insertCell(6));
                cells.push(newRow.insertCell(7));

                cells[0].innerHTML = '<input type="text" id="ingredientName" required>';
                cells[1].innerHTML = '<input type="text" id="origin" required>';
                cells[2].innerHTML = '<input type="text" id="nutritionalValue" required>';
                cells[3].innerHTML = '<input type="text" id="allergenInfo" required>';
                cells[4].innerHTML = '<input type="text" id="shelfLife" required>';
                cells[5].innerHTML = '<input type="number" id="quantity" required>';
                cells[6].innerHTML = '<input type="text" id="unit" required>';
                cells[7].innerHTML = '<button onclick="removeIngredient(this)">Remove</button>';
            }

            function removeIngredient(element) {
                const row = element.parentNode.parentNode;
                row.parentNode.removeChild(row);
            }

            function viewRecipe(id) {
                const recipe = recipes.find(recipe => recipe.id === id);
                const recipeInfo = document.getElementById('recipe-info');
                recipeInfo.innerHTML = `
                    <h3>${recipe.title}</h3>
                    <p>Author: ${recipe.author}</p>
                    <p>Date Created: ${recipe.date}</p>
                    <p>Preparation Time: ${recipe.prepTime} minutes</p>
                    <p>Cooking Time: ${recipe.cookTime} minutes</p>
                    <p>Serving Size: ${recipe.servingSize}</p>
                    <p>Food Description: ${recipe.foodDesc}</p>
                    <p>Calories per Serving: ${recipe.caloriesPerServing}</p>
                    <p>Food Origin: ${recipe.foodOrigin}</p>
                    <p>Instructions: ${recipe.instructions}</p>
                    <p>Recipe Image URL: ${recipe.imageURL}</p>
                    <h4>Ingredients:</h4>
                    <ul>
                        ${recipe.ingredients.map(ingredient => `
                            <li>
                                ${ingredient.name} (${ingredient.quantity} ${ingredient.unit})
                                <ul>
                                    <li>Origin: ${ingredient.origin}</li>
                                    <li>Nutritional Value: ${ingredient.nutritionalValue}</li>
                                    <li>Allergen Information: ${ingredient.allergenInfo}</li>
                                    <li>Shelf Life: ${ingredient.shelfLife}</li>
                                </ul>
                            </li>
                        `).join('')}
                    </ul>
                `;
                document.getElementById('recipe-details').style.display = 'block';
            }

            function editRecipe(id) {
                const recipe = recipes.find(recipe => recipe.id === id);
                document.getElementById('title').value = recipe.title;
                document.getElementById('author').value = recipe.author;
                document.getElementById('date').value = recipe.date;
                document.getElementById('prepTime').value = recipe.prepTime;
                document.getElementById('cookTime').value = recipe.cookTime;
                document.getElementById('servingSize').value = recipe.servingSize;
                document.getElementById('foodDesc').value = recipe.foodDesc;
                document.getElementById('caloriesPerServing').value = recipe.caloriesPerServing;
                document.getElementById('foodOrigin').value = recipe.foodOrigin;
                document.getElementById('instructions').value = recipe.instructions;
                document.getElementById('imageURL').value = recipe.imageURL;

                const ingredientList = document.getElementById('ingredient-list');
                ingredientList.innerHTML = '';
                recipe.ingredients.forEach(ingredient => {
                    const newRow = ingredientList.insertRow(-1);
                    const cells = [];
                    cells.push(newRow.insertCell(0));
                    cells.push(newRow.insertCell(1));
                    cells.push(newRow.insertCell(2));
                    cells.push(newRow.insertCell(3));
                    cells.push(newRow.insertCell(4));
                    cells.push(newRow.insertCell(5));
                    cells.push(newRow.insertCell(6));
                    cells.push(newRow.insertCell(7));

                    cells[0].innerHTML = ingredient.name;
                    cells[1].innerHTML = ingredient.origin;
                    cells[2].innerHTML = ingredient.nutritionalValue;
                    cells[3].innerHTML = ingredient.allergenInfo;
                    cells[4].innerHTML = ingredient.shelfLife;
                    cells[5].innerHTML = `${ingredient.quantity} ${ingredient.unit}`;
                    cells[6].innerHTML = '<button onclick="removeIngredient(this)">Remove</button>';
                });

                document.getElementById('form-title').innerHTML = 'Edit Recipe';
                document.getElementById('recipe-form').style.display = 'block';
            }

            function deleteRecipe(id) {
                const recipeIndex = recipes.findIndex(recipe => recipe.id === id);
                if (recipeIndex !== -1) {
                    recipes.splice(recipeIndex, 1);
                    const recipeTable = document.getElementById('recipe-table');
                    const rows = recipeTable.rows;
                    for (let i = 1; i < rows.length; i++) {
                        if (rows[i].cells[0].innerHTML === id.toString()) {
                            rows[i].parentNode.removeChild(rows[i]);
                            break;
                        }
                    }
                }
            }

            document.getElementById('recipeForm').addEventListener('submit', function(event) {
                event.preventDefault();
                const title = document.getElementById('title').value;
                const author = document.getElementById('author').value;
                const date = document.getElementById('date').value;
                const prepTime = document.getElementById('prepTime').value;
                const cookTime = document.getElementById('cookTime').value;
                const servingSize = document.getElementById('servingSize').value;
                const foodDesc = document.getElementById('foodDesc').value;
                const caloriesPerServing = document.getElementById('caloriesPerServing').value;
                const foodOrigin = document.getElementById('foodOrigin').value;
                const instructions = document.getElementById('instructions').value;
                const imageURL = document.getElementById('imageURL').value;

                const ingredientList = document.getElementById('ingredient-list');
                const ingredients = [];
                for (let i = 0; i < ingredientList.rows.length; i++) {
                    const ingredient = {
                        name: ingredientList.rows[i].cells[0].innerHTML,
                        origin: ingredientList.rows[i].cells[1].innerHTML,
                        nutritionalValue: ingredientList.rows[i].cells[2].innerHTML,
                        allergenInfo: ingredientList.rows[i].cells[3].innerHTML,
                        shelfLife: ingredientList.rows[i].cells[4].innerHTML,
                        quantity: ingredientList.rows[i].cells[5].innerHTML.split(' ')[0],
                        unit: ingredientList.rows[i].cells[5].innerHTML.split(' ')[1]
                    };
                    ingredients.push(ingredient);
                }

                const recipe = {
                    id: recipes.length + 1,
                    title: title,
                    author: author,
                    date: date,
                    prepTime: prepTime,
                    cookTime: cookTime,
                    servingSize: servingSize,
                    foodDesc: foodDesc,
                    caloriesPerServing: caloriesPerServing,
                    foodOrigin: foodOrigin,
                    instructions: instructions,
                    imageURL: imageURL,
                    ingredients: ingredients
                };

                recipes.push(recipe);

                const recipeTable = document.getElementById('recipe-table');
                const newRow = recipeTable.insertRow(-1);
                const cells = [];
                cells.push(newRow.insertCell(0));
                cells.push(newRow.insertCell(1));
                cells.push(newRow.insertCell(2));
                cells.push(newRow.insertCell(3));
                cells.push(newRow.insertCell(4));

                cells[0].innerHTML = recipe.id;
                cells[1].innerHTML = recipe.title;
                cells[2].innerHTML = recipe.author;
                cells[3].innerHTML = recipe.date;
                cells[4].innerHTML = `
                    <button onclick="viewRecipe(${recipe.id})">View</button>
                    <button onclick="editRecipe(${recipe.id})">Edit</button>
                    <button onclick="deleteRecipe(${recipe.id})">Delete</button>
                `;

                document.getElementById('recipe-form').style.display = 'none';
            });
        </script>
    </body>
</html>