<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flavorful Feeds Recipe Management</title>
    <link rel="stylesheet" href="./assets/recipes.css">
    <style>
        body {
                font-family: 'Poppins', Arial, sans-serif;
                margin: 0;
                padding: 0;
                min-height: 100vh;
                background-color: #f4f4f4;
                background-image: url('./assets/recipes.jpg'); 
                background-repeat: no-repeat;
                background-position: center center;
                background-attachment: fixed; 
                background-size: cover;
                display: flex;
                flex-direction: column;
            }



            header {
                background: transparent; 
                background-size: cover;
                background-position: center;
                padding: 20px 30px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                color: white;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            header h1 {
                margin: 0;
                font-size: 2rem;
                font-weight: 600;
            }

            nav ul {
                list-style: none;
                padding: 0;
                margin: 0;
                display: flex;
                gap: 20px;
            }

            nav li {
                position: relative;
            }

            nav a {
                color: #ffffff;
                text-decoration: none;
                font-weight: 500;
                font-size: 1rem;
                padding: 10px 15px;
                transition: color 0.3s, border-bottom 0.3s;
            }

            nav a:hover {
                color: #ddd;
                border-bottom: 2px solid #ddd;
            }


            nav a::after {
                content: ' â–¼';
                font-size: 0.8rem;
                margin-left: 5px;
                display: inline;
            }

            /* Responsive styling for smaller screens */
            @media (max-width: 768px) {
                header {
                    flex-direction: column;
                    align-items: center;
                }

                nav ul {
                    flex-direction: column;
                    gap: 10px;
                }
            }

            button#add-new-recipe {
                background-color: #4CAF50;
                color: white;
                border: none;
                border-radius: 30px;
                padding: 12px 25px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease-in-out;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            }

            button#add-new-recipe:hover {
                background-color: #45a049;
                transform: translateY(-3px);
                box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
            }


            main {
                padding: 30px;
                background-color: #ffffff;
                border-radius: 15px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
                max-width: 900px;
                margin: auto;
                margin-top: 20px;
            }

            /* Table styling */
            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                background-color: #fff;
                border-radius: 10px;
                overflow: hidden;
            }

            th, td {
                padding: 15px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }

            th {
                background-color: #f2f2f2;
                font-weight: 600;
            }

            td button {
                background-color: #4CAF50;
                color: white;
                border: none;
                padding: 8px 12px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.3s ease;
            }

            td button:hover {
                background-color: #45a049;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transform: translateY(-2px);
            }

            /* Footer styling */
            footer {
                text-align: center;
                padding: 15px;
                background-color: #6c757d;
                color: white;
                margin-top: auto;
            }

            /* Form container */
            form {
                background-color: #f9f9f9;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            label {
                font-weight: 300;
                margin-top: 10px;
            }

            input, textarea {
                width: calc(100% - 20px);
                padding: 10px;
                margin-top: 5px;
                border: 1px solid #ddd;
                border-radius: 5px;
                transition: border 0.3s, box-shadow 0.3s;
            }

            input:focus, textarea:focus {
                border-color: #4CAF50;
                box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
                outline: none;
            }

            button[type="submit"], button[type="button"] {
                background-color: #4CAF50;
                color: #fff;
                padding: 10px 15px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s, transform 0.3s;
                margin-top: 15px;
            }

            button[type="submit"]:hover, button[type="button"]:hover {
                background-color: #45a049;
                transform: translateY(-2px);
            }

            .error {
                color: red;
                font-size: 0.85rem;
            }

            @media (max-width: 768px) {
                main {
                    padding: 20px;
                }

                th, td {
                    font-size: 0.9rem;
                    padding: 10px;
                }
            }
    </style>

</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="users.html">User  Management</a></li>
                <li><a href="recipes.html">Recipe Management</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="recipe-management">
            <h2>Recipe Management</h2>
            <button onclick="showAddRecipeForm()">Add New Recipe</button>
            <table id="recipe-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Date Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Green Smoothie Bowl</td>
                        <td>Jochebed Tetteh</td>
                        <td>2018-07-13</td>
                        <td>
                            <button onclick="viewRecipe(1)">View</button>
                            <button onclick="editRecipe(1)">Edit</button>
                            <button onclick="deleteRecipe(1)">Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Avocado Salad</td>
                        <td>Nathily Amoako</td>
                        <td>2024-09-20</td>
                        <td>
                            <button onclick="viewRecipe(2)">View</button>
                            <button onclick="editRecipe(2)">Edit</button>
                            <button onclick="deleteRecipe(2)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="recipe-details" style="display: none;">
            <h3>Recipe Details</h3>
            <div id="recipe-info"></div>
        </section>

        <section id="recipe-form" style="display: none;">
            <h3 id="form-title">Add/Edit Recipe</h3>
            <div id="recipe-form-container">
                <form id="recipeForm" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                    <div>
                        <label for="title">Recipe Title:</label>
                        <input type="text" id="title" required>
                    </div>
                    <div>
                        <label for="author">Author:</label>
                        <input type="text" id="author" required>
                    </div>
                                        <div>
                        <label for="date">Date Created:</label>
                        <input type="date" id="date" required>
                    </div>
                    <div>
                        <label for="prepTime">Preparation Time (minutes):</label>
                        <input type="number" id="prepTime" required>
                    </div>
                    <div>
                        <label for="cookTime">Cooking Time (minutes):</label>
                        <input type="number" id="cookTime" required>
                    </div>
                    <div>
                        <label for="servingSize">Serving Size:</label>
                        <input type="number" id="servingSize" required>
                    </div>
                    <div>
                        <label for="foodDesc">Food Description:</label>
                        <textarea id="foodDesc" required></textarea>
                    </div>
                    <div>
                        <label for="caloriesPerServing">Calories per Serving:</label>
                        <input type="number" id="caloriesPerServing" required>
                    </div>
                    <div>
                        <label for="foodOrigin">Food Origin:</label>
                        <input type="text" id="foodOrigin" required>
                    </div>
                    <div>
                        <label for="instructions">Instructions:</label>
                        <textarea id="instructions" required></textarea>
                    </div>
                    <div>
                        <label for="imageURL">Recipe Image URL:</label>
                        <input type="url" id="imageURL" required>
                    </div>
                    <div id="ingredients">
                        <h4>Ingredients:</h4>
                        <table id="ingredient-table">
                            <thead>
                                <tr>
                                    <th>Ingredient Name</th>
                                    <th>Origin</th>
                                    <th>Nutritional Value</th>
                                    <th>Allergen Information</th>
                                    <th>Shelf Life</th>
                                    <th>Quantity</th>
                                    <th>Unit</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="ingredient-list">
                                <!-- Ingredient list will be rendered here -->
                            </tbody>
                        </table>
                        <button onclick="addIngredient()">Add Ingredient</button>
                    </div>
                    <div>
                        <button type="submit">Save Recipe</button>
                        <button type="button" onclick="hideAddRecipeForm()">Cancel</button>
                    </div>
                </form>
            </div>
        </section>

        <script>
            let recipes = [
                {
                    id: 1,
                    title: 'Green Smoothie Bowl',
                    author: 'Jochebed Tetteh',
                    date: '2018-07-13',
                    prepTime: 10,
                    cookTime: 0,
                    servingSize: 1,
                    foodDesc: 'A healthy and refreshing smoothie bowl',
                    caloriesPerServing: 200,
                    foodOrigin: 'Ghana',
                    instructions: 'Blend all ingredients and serve',
                    imageURL: 'RECIPE_SHARING/assets/smoothie-bowl.jpg',
                    ingredients: [
                        {
                            name: 'Banana',
                            origin: 'Ghana',
                            nutritionalValue: 'Rich in potassium',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '3 days',
                            quantity: 1,
                            unit: 'piece'
                        },
                        {
                            name: 'Spinach',
                            origin: 'USA',
                            nutritionalValue: 'Rich in iron',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '5 days',
                            quantity: 2,
                            unit: 'cups'
                        }
                    ]
                },
                {
                    id: 2,
                    title: 'Avocado Salad',
                    author: 'Nathily Amoako',
                    date: '2024-09-20',
                    prepTime: 15,
                    cookTime: 0,
                    servingSize: 2,
                    foodDesc: 'A healthy and refreshing salad',
                    caloriesPerServing: 300,
                    foodOrigin: 'Mexico',
                    instructions: 'Mix all ingredients and serve',
                    imageURL: 'RECIPE_SHARING/assets/avocado-salad.jpg',
                    ingredients: [
                        {
                            name: 'Avocado',
                            origin: 'Mexico',
                            nutritionalValue: 'Rich in healthy fats',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '5 days',
                            quantity: 2,
                            unit: 'pieces'
                        },
                        {
                            name: 'Tomato',
                            origin: 'USA',
                            nutritionalValue: 'Rich in vitamin C',
                            allergenInfo: 'May cause allergic reactions',
                            shelfLife: '7 days',
                            quantity: 3,
                            unit: 'pieces'
                        }
                    ]
                }
            ];

            function showAddRecipeForm() {
                document.getElementById('recipe-form').style.display = 'block';
            }

            function hideAddRecipeForm() {
                document.getElementById('recipe-form').style.display = 'none';
            }

            function addIngredient() {
                const ingredientTable = document.getElementById('ingredient-table');
                const newRow = ingredientTable.insertRow(-1);
                const cells = [];
                cells.push(newRow.insertCell(0));
                cells.push(newRow.insertCell(1));
                cells.push(newRow.insertCell(2));
                cells.push(newRow.insertCell(3));
                cells.push(newRow.insertCell(4));
                cells.push(newRow.insertCell(5));
                cells.push(newRow.insertCell(6));
                cells.push(newRow.insertCell(7));

                cells[0].innerHTML = '<input type="text" id="ingredientName" required>';
                cells[1].innerHTML = '<input type="text" id="origin" required>';
                cells[2].innerHTML = '<input type="text" id="nutritionalValue" required>';
                cells[3].innerHTML = '<input type="text" id="allergenInfo" required>';
                cells[4].innerHTML = '<input type="text" id="shelfLife" required>';
                cells[5].innerHTML = '<input type="number" id="quantity" required>';
                cells[6].innerHTML = '<input type="text" id="unit" required>';
                cells[7].innerHTML = '<button onclick="removeIngredient(this)">Remove</button>';
            }

            function removeIngredient(element) {
                const row = element.parentNode.parentNode;
                row.parentNode.removeChild(row);
            }

            function viewRecipe(id) {
                const recipe = recipes.find(recipe => recipe.id === id);
                const recipeInfo = document.getElementById('recipe-info');
                recipeInfo.innerHTML = `
                    <h3>${recipe.title}</h3>
                    <p>Author: ${recipe.author}</p>
                    <p>Date Created: ${recipe.date}</p>
                    <p>Preparation Time: ${recipe.prepTime} minutes</p>
                    <p>Cooking Time: ${recipe.cookTime} minutes</p>
                    <p>Serving Size: ${recipe.servingSize}</p>
                    <p>Food Description: ${recipe.foodDesc}</p>
                    <p>Calories per Serving: ${recipe.caloriesPerServing}</p>
                    <p>Food Origin: ${recipe.foodOrigin}</p>
                    <p>Instructions: ${recipe.instructions}</p>
                    <p>Recipe Image URL: ${recipe.imageURL}</p>
                    <h4>Ingredients:</h4>
                    <ul>
                        ${recipe.ingredients.map(ingredient => `
                            <li>
                                ${ingredient.name} (${ingredient.quantity} ${ingredient.unit})
                                <ul>
                                    <li>Origin: ${ingredient.origin}</li>
                                    <li>Nutritional Value: ${ingredient.nutritionalValue}</li>
                                    <li>Allergen Information: ${ingredient.allergenInfo}</li>
                                    <li>Shelf Life: ${ingredient.shelfLife}</li>
                                </ul>
                            </li>
                        `).join('')}
                    </ul>
                `;
                document.getElementById('recipe-details').style.display = 'block';
            }

            function editRecipe(id) {
                const recipe = recipes.find(recipe => recipe.id === id);
                document.getElementById('title').value = recipe.title;
                document.getElementById('author').value = recipe.author;
                document.getElementById('date').value = recipe.date;
                document.getElementById('prepTime').value = recipe.prepTime;
                document.getElementById('cookTime').value = recipe.cookTime;
                document.getElementById('servingSize').value = recipe.servingSize;
                document.getElementById('foodDesc').value = recipe.foodDesc;
                document.getElementById('caloriesPerServing').value = recipe.caloriesPerServing;
                document.getElementById('foodOrigin').value = recipe.foodOrigin;
                document.getElementById('instructions').value = recipe.instructions;
                document.getElementById('imageURL').value = recipe.imageURL;

                const ingredientList = document.getElementById('ingredient-list');
                ingredientList.innerHTML = '';
                recipe.ingredients.forEach(ingredient => {
                    const newRow = ingredientList.insertRow(-1);
                    const cells = [];
                    cells.push(newRow.insertCell(0));
                    cells.push(newRow.insertCell(1));
                    cells.push(newRow.insertCell(2));
                    cells.push(newRow.insertCell(3));
                    cells.push(newRow.insertCell(4));
                    cells.push(newRow.insertCell(5));
                    cells.push(newRow.insertCell(6));
                    cells.push(newRow.insertCell(7));

                    cells[0].innerHTML = ingredient.name;
                    cells[1].innerHTML = ingredient.origin;
                    cells[2].innerHTML = ingredient.nutritionalValue;
                    cells[3].innerHTML = ingredient.allergenInfo;
                    cells[4].innerHTML = ingredient.shelfLife;
                    cells[5].innerHTML = `${ingredient.quantity} ${ingredient.unit}`;
                    cells[6].innerHTML = '<button onclick="removeIngredient(this)">Remove</button>';
                });

                document.getElementById('form-title').innerHTML = 'Edit Recipe';
                document.getElementById('recipe-form').style.display = 'block';
            }

            function deleteRecipe(id) {
                const recipeIndex = recipes.findIndex(recipe => recipe.id === id);
                if (recipeIndex !== -1) {
                    recipes.splice(recipeIndex, 1);
                    const recipeTable = document.getElementById('recipe-table');
                    const rows = recipeTable.rows;
                    for (let i = 1; i < rows.length; i++) {
                        if (rows[i].cells[0].innerHTML === id.toString()) {
                            rows[i].parentNode.removeChild(rows[i]);
                            break;
                        }
                    }
                }
            }

            document.getElementById('recipeForm').addEventListener('submit', function(event) {
                event.preventDefault();
                const title = document.getElementById('title').value;
                const author = document.getElementById('author').value;
                const date = document.getElementById('date').value;
                const prepTime = document.getElementById('prepTime').value;
                const cookTime = document.getElementById('cookTime').value;
                const servingSize = document.getElementById('servingSize').value;
                const foodDesc = document.getElementById('foodDesc').value;
                const caloriesPerServing = document.getElementById('caloriesPerServing').value;
                const foodOrigin = document.getElementById('foodOrigin').value;
                const instructions = document.getElementById('instructions').value;
                const imageURL = document.getElementById('imageURL').value;

                const ingredientList = document.getElementById('ingredient-list');
                const ingredients = [];
                for (let i = 0; i < ingredientList.rows.length; i++) {
                    const ingredient = {
                        name: ingredientList.rows[i].cells[0].innerHTML,
                        origin: ingredientList.rows[i].cells[1].innerHTML,
                        nutritionalValue: ingredientList.rows[i].cells[2].innerHTML,
                        allergenInfo: ingredientList.rows[i].cells[3].innerHTML,
                        shelfLife: ingredientList.rows[i].cells[4].innerHTML,
                        quantity: ingredientList.rows[i].cells[5].innerHTML.split(' ')[0],
                        unit: ingredientList.rows[i].cells[5].innerHTML.split(' ')[1]
                    };
                    ingredients.push(ingredient);
                }

                const recipe = {
                    id: recipes.length + 1,
                    title: title,
                    author: author,
                    date: date,
                    prepTime: prepTime,
                    cookTime: cookTime,
                    servingSize: servingSize,
                    foodDesc: foodDesc,
                    caloriesPerServing: caloriesPerServing,
                    foodOrigin: foodOrigin,
                    instructions: instructions,
                    imageURL: imageURL,
                    ingredients: ingredients
                };

                recipes.push(recipe);

                const recipeTable = document.getElementById('recipe-table');
                const newRow = recipeTable.insertRow(-1);
                const cells = [];
                cells.push(newRow.insertCell(0));
                cells.push(newRow.insertCell(1));
                cells.push(newRow.insertCell(2));
                cells.push(newRow.insertCell(3));
                cells.push(newRow.insertCell(4));

                cells[0].innerHTML = recipe.id;
                cells[1].innerHTML = recipe.title;
                cells[2].innerHTML = recipe.author;
                cells[3].innerHTML = recipe.date;
                cells[4].innerHTML = `
                    <button onclick="viewRecipe(${recipe.id})">View</button>
                    <button onclick="editRecipe(${recipe.id})">Edit</button>
                    <button onclick="deleteRecipe(${recipe.id})">Delete</button>
                `;

                document.getElementById('recipe-form').style.display = 'none';
            });
            document.addEventListener('DOMContentLoaded', () => {
    fetchRecipes();

    document.getElementById('recipeForm').addEventListener('submit', function (event) {
        event.preventDefault();
        const formData = new FormData(this);
        const recipeId = this.dataset.recipeId; // Retrieve recipe ID if editing

        // Determine action based on the presence of recipe ID
        const action = recipeId ? 'edit_recipe' : 'add_recipe';
        formData.append('action', action);

        if (recipeId) {
            formData.append('recipe_id', recipeId);
        }

        fetch('./view/recipes.php', {
            method: 'POST',
            body: new URLSearchParams(formData),
        })
            .then((response) => response.json())
            .then((data) => {
                alert(data.message);
                if (data.success) {
                    fetchRecipes();
                    hideAddRecipeForm();
                }
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('Failed to save the recipe.');
            });
    });
});

// Fetch all recipes from the backend
function fetchRecipes() {
    fetch('./view/recipes.php')
        .then((response) => response.json())
        .then((data) => {
            const recipeTableBody = document.getElementById('recipe-table').getElementsByTagName('tbody')[0];
            recipeTableBody.innerHTML = '';

            if (data.success && data.recipes.length > 0) {
                data.recipes.forEach((recipe) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${recipe.recipe_id}</td>
                        <td>${recipe.food_id}</td>
                        <td>${recipe.created_at}</td>
                        <td>
                            <button onclick="viewRecipe(${recipe.recipe_id})">View</button>
                            <button onclick="editRecipe(${recipe.recipe_id})">Edit</button>
                            <button onclick="deleteRecipe(${recipe.recipe_id})">Delete</button>
                        </td>
                    `;
                    recipeTableBody.appendChild(row);
                });
            } else {
                recipeTableBody.innerHTML = '<tr><td colspan="4">No recipes found.</td></tr>';
            }
        })
        .catch((error) => {
            console.error('Error fetching recipes:', error);
            alert('Failed to load recipes.');
        });
}

// View recipe details
function viewRecipe(recipeId) {
    fetch(`./view/recipes.php?action=get_recipe&recipe_id=${recipeId}`)
        .then((response) => response.json())
        .then((data) => {
            if (data.success && data.recipe) {
                const recipeDetails = data.recipe;
                const recipeInfo = document.getElementById('recipe-info');
                recipeInfo.innerHTML = `
                    <h3>Recipe Details</h3>
                    <p><strong>Recipe ID:</strong> ${recipeDetails[0].recipe_id}</p>
                    <p><strong>Food ID:</strong> ${recipeDetails[0].food_id}</p>
                    <p><strong>Created At:</strong> ${recipeDetails[0].created_at}</p>
                    <h4>Ingredients:</h4>
                    <ul>
                        ${recipeDetails
                            .map(
                                (ingredient) => `
                            <li>
                                <strong>Ingredient ID:</strong> ${ingredient.ingredient_id} - 
                                <strong>Quantity:</strong> ${ingredient.quantity} 
                                <strong>Unit:</strong> ${ingredient.unit}
                                <strong>Optional:</strong> ${ingredient.optional ? 'Yes' : 'No'}
                            </li>
                        `
                            )
                            .join('')}
                    </ul>
                `;
                document.getElementById('recipe-details').style.display = 'block';
            } else {
                alert(data.message || 'Failed to fetch recipe details.');
            }
        })
        .catch((error) => {
            console.error('Error fetching recipe details:', error);
            alert('Failed to fetch recipe details.');
        });
}

// Edit a recipe
function editRecipe(recipeId) {
    fetch(`./view/recipes.php?action=get_recipe&recipe_id=${recipeId}`)
        .then((response) => response.json())
        .then((data) => {
            if (data.success && data.recipe) {
                const recipeDetails = data.recipe;
                const form = document.getElementById('recipeForm');

                form.dataset.recipeId = recipeDetails[0].recipe_id; // Store the recipe ID for editing
                form.food_id.value = recipeDetails[0].food_id;

                const ingredientList = document.getElementById('ingredient-list');
                ingredientList.innerHTML = '';

                recipeDetails.forEach((ingredient) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><input type="hidden" name="ingredient_id[]" value="${ingredient.ingredient_id}">${ingredient.ingredient_id}</td>
                        <td><input type="number" name="quantity[]" value="${ingredient.quantity}" required></td>
                        <td><input type="text" name="unit[]" value="${ingredient.unit}" required></td>
                        <td>
                            <select name="optional[]">
                                <option value="1" ${ingredient.optional ? 'selected' : ''}>Yes</option>
                                <option value="0" ${!ingredient.optional ? 'selected' : ''}>No</option>
                            </select>
                        </td>
                    `;
                    ingredientList.appendChild(row);
                });

                showAddRecipeForm();
            } else {
                alert(data.message || 'Failed to fetch recipe details.');
            }
        })
        .catch((error) => {
            console.error('Error fetching recipe:', error);
            alert('Failed to fetch recipe details.');
        });
}

// Delete a recipe
function deleteRecipe(recipeId) {
    if (confirm(`Are you sure you want to delete recipe with ID ${recipeId}?`)) {
        fetch('./view/recipes.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `action=delete_recipe&recipe_id=${recipeId}`,
        })
            .then((response) => response.json())
            .then((data) => {
                alert(data.message);
                if (data.success) {
                    fetchRecipes();
                }
            })
            .catch((error) => {
                console.error('Error deleting recipe:', error);
                alert('Failed to delete recipe.');
            });
    }
}

function showAddRecipeForm() {
    const form = document.getElementById('recipeForm');
    form.reset();
    delete form.dataset.recipeId; // Clear the recipe ID for new recipes
    document.getElementById('recipe-form').style.display = 'block';
}

function hideAddRecipeForm() {
    document.getElementById('recipe-form').style.display = 'none';
}
</script>
</body>
</html>